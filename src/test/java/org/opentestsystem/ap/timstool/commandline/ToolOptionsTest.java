package org.opentestsystem.ap.timstool.commandline;

import org.apache.commons.cli.Option;
import org.apache.commons.cli.Options;
import org.junit.Before;
import org.junit.Test;

import static org.assertj.core.api.Assertions.assertThat;

public class ToolOptionsTest {

    ToolOptions toolOptions;

    @Before
    public void setUp() {
        toolOptions = new ToolOptions();
    }

    @Test
    public void getOptions() {
        Options options = toolOptions.getOptions();
        assertThat(options.getOptions()).hasSize(5);
    }

    @Test
    public void getHelp() {
        Option option = toolOptions.getHelp();
        assertOptions(option, "h", "help", false, "Prints this message.");
    }

    @Test
    public void getCommands() {
        Option option = toolOptions.getCommands();
        assertOptions(option, "c", "commands", false, "Lists the tool commands.");
    }

    @Test
    public void getInputFile() {
        Option option = toolOptions.getInputFile();
        assertOptions(option, "i", "input", true, "Specifies the input file.");
        assertThat(option.getArgName()).isEqualTo("file");
    }

    @Test
    public void getOutputFile() {
        Option option = toolOptions.getOutputFile();
        assertOptions(option, "o", "output", true, "Specifies the output file or directory.");
        assertThat(option.getArgName()).isEqualTo("file");
    }

    @Test
    public void getItemIds() {
        Option option = toolOptions.getItemIds();
        assertOptions(option, "d", "itemIds", true, "Specifies the item ids to create test packages for.");
    }

    private void assertOptions(Option option, String opt, String longOpt, boolean hasArg, String desc) {
        assertThat(option.getOpt()).isEqualTo(opt);
        assertThat(option.getLongOpt()).isEqualTo(longOpt);
        assertThat(option.hasArg()).isEqualTo(hasArg);
        assertThat(option.getDescription()).isEqualTo(desc);
    }
}
